<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Dark Mode with Teal Accent -->
    <!-- Application Structure Plan: The application structure has been redesigned based on the PDF. It now starts with a full-screen login page. After login, the user lands on a "Home" dashboard with large, tappable cards for navigating to the main modules (Inventory, Billing, Staff). This card-based navigation is more intuitive and mobile-friendly than the previous sidebar. The internal structure of pages like Inventory is now also grid-based, showing categories first, then products, which simplifies browsing. This flow mimics a modern POS or mobile application, prioritizing ease of use. -->
    <!-- Visualization & Content Choices: The new design prioritizes a visual, card-based grid (Goal: Organize/Select) for both Inventory and Billing, which directly reflects the user-provided mockups. The table for Staff is retained for data density but restyled for the dark theme. The Dashboard chart is also restyled to fit the new aesthetic. This shift from tables to grids for product-heavy sections makes the interface less intimidating and faster to navigate visually. All interactions are handled with vanilla JavaScript. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        .modal-backdrop {
            background-color: rgba(0,0,0,0.7);
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        .main-app {
            display: none;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200">

    <!-- Login Page -->
    <div id="login-page" class="flex flex-col items-center justify-center h-screen bg-slate-900 p-8">
        <h1 class="text-4xl font-bold text-teal-400 mb-12">FamilyBiz Pro</h1>
        <div class="w-full max-w-sm">
            <div class="mb-6">
                <label for="userId" class="text-lg font-semibold mb-2 block">User ID:</label>
                <input type="text" id="userId" class="w-full p-4 bg-slate-800 border-2 border-slate-700 rounded-full text-center text-lg focus:outline-none focus:border-teal-500 transition-colors">
            </div>
            <div class="mb-8">
                <label for="password" class="text-lg font-semibold mb-2 block">Password:</label>
                <input type="password" id="password" class="w-full p-4 bg-slate-800 border-2 border-slate-700 rounded-full text-center text-lg focus:outline-none focus:border-teal-500 transition-colors">
            </div>
            <button id="loginBtn" class="w-full bg-teal-500 text-slate-900 p-4 rounded-full text-xl font-bold hover:bg-teal-400 transition-colors">LOGIN</button>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app">
        <main class="p-6 lg:p-10">
            <!-- Home Page (New Dashboard) -->
            <div id="home" class="page">
                <h1 class="text-3xl font-bold mb-8 text-center">Select a Module</h1>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
                    <a href="#inventory" class="nav-card bg-slate-800 p-10 rounded-2xl text-center hover:bg-slate-700 hover:-translate-y-2 transition-transform duration-300">
                        <h2 class="text-2xl font-bold">Stock Management</h2>
                    </a>
                     <a href="#billing" class="nav-card bg-slate-800 p-10 rounded-2xl text-center hover:bg-slate-700 hover:-translate-y-2 transition-transform duration-300">
                        <h2 class="text-2xl font-bold">Billing & Returns</h2>
                    </a>
                     <a href="#staff" class="nav-card bg-slate-800 p-10 rounded-2xl text-center hover:bg-slate-700 hover:-translate-y-2 transition-transform duration-300">
                        <h2 class="text-2xl font-bold">Staff Management</h2>
                    </a>
                </div>
                 <div class="mt-12 max-w-4xl mx-auto">
                    <div class="bg-slate-800 p-6 rounded-xl">
                        <h2 class="text-2xl font-bold mb-4">Sales Overview</h2>
                        <div class="chart-container">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory Page -->
            <div id="inventory" class="page hidden">
                <button class="home-btn mb-8 text-teal-400 font-semibold">&larr; Back to Home</button>
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold">Inventory</h1>
                    <button id="addProductBtn" class="bg-teal-500 text-slate-900 px-5 py-3 rounded-lg font-bold hover:bg-teal-400 transition-colors">Add Product</button>
                </div>
                <input type="text" id="inventorySearch" placeholder="Search for products or categories..." class="w-full p-3 bg-slate-800 border border-slate-700 rounded-lg mb-6">
                <div id="categoryGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
                    <!-- Category cards will be injected here -->
                </div>
            </div>

            <!-- Billing Page -->
            <div id="billing" class="page hidden">
                <button class="home-btn mb-8 text-teal-400 font-semibold">&larr; Back to Home</button>
                <h1 class="text-3xl font-bold mb-8">Create Bill</h1>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <input type="text" id="billingProductSearch" placeholder="Search for products to add..." class="w-full p-3 bg-slate-800 border border-slate-700 rounded-lg mb-4">
                        <div id="billingProductGrid" class="grid grid-cols-2 md:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto p-2">
                           <!-- Product cards for billing will be injected here -->
                        </div>
                    </div>
                    <div class="lg:col-span-1">
                        <div class="bg-slate-800 p-6 rounded-xl">
                            <h2 class="text-2xl font-bold mb-4 border-b border-slate-700 pb-3">Bill Summary</h2>
                            <div id="billItems" class="mb-4 max-h-64 overflow-y-auto">
                                <p class="text-slate-400 text-center py-4">No items added yet.</p>
                            </div>
                            <div class="border-t border-slate-700 pt-4">
                                <div class="flex justify-between items-center text-xl font-bold">
                                    <span>Total</span>
                                    <span id="billTotal" class="text-teal-400">₹0.00</span>
                                </div>
                                <button class="w-full bg-teal-500 text-slate-900 p-4 rounded-lg font-bold mt-6 hover:bg-teal-400 transition-colors">Finalize & Print</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Staff Page -->
            <div id="staff" class="page hidden">
                 <button class="home-btn mb-8 text-teal-400 font-semibold">&larr; Back to Home</button>
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold">Staff Management</h1>
                     <button class="bg-teal-500 text-slate-900 px-5 py-3 rounded-lg font-bold hover:bg-teal-400 transition-colors">Add New Staff</button>
                </div>
                 <div class="bg-slate-800 rounded-xl overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-slate-700">
                            <tr>
                                <th class="p-4 font-semibold">Full Name</th>
                                <th class="p-4 font-semibold">Role</th>
                                <th class="p-4 font-semibold">Status</th>
                                <th class="p-4 font-semibold">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="staffTableBody"></tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>
    
    <!-- Modals -->
    <div id="productModal" class="fixed inset-0 z-50 items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0"></div>
        <div class="modal-content bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg m-4 relative p-8 border border-slate-700">
            <h2 id="modalTitle" class="text-2xl font-bold mb-6">Add New Product</h2>
            <form id="productForm">
                <input type="hidden" id="productId">
                <div class="mb-4">
                    <label for="productName" class="block font-semibold mb-1 text-slate-400">Product Name</label>
                    <input type="text" id="productName" class="w-full p-3 bg-slate-700 border border-slate-600 rounded-lg" required>
                </div>
                <div class="mb-4">
                    <label for="productCategory" class="block font-semibold mb-1 text-slate-400">Category</label>
                    <input type="text" id="productCategory" class="w-full p-3 bg-slate-700 border border-slate-600 rounded-lg">
                </div>
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div>
                        <label for="productQuantity" class="block font-semibold mb-1 text-slate-400">Quantity</label>
                        <input type="number" id="productQuantity" class="w-full p-3 bg-slate-700 border border-slate-600 rounded-lg" required min="0">
                    </div>
                    <div>
                        <label for="productPrice" class="block font-semibold mb-1 text-slate-400">Price (₹)</label>
                        <input type="number" id="productPrice" class="w-full p-3 bg-slate-700 border border-slate-600 rounded-lg" required min="0" step="0.01">
                    </div>
                </div>
                <div class="flex justify-end gap-4">
                    <button type="button" id="cancelModalBtn" class="bg-slate-600 px-6 py-3 rounded-lg font-semibold hover:bg-slate-500">Cancel</button>
                    <button type="submit" class="bg-teal-500 text-slate-900 px-6 py-3 rounded-lg font-bold hover:bg-teal-400">Save Product</button>
                </div>
            </form>
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {

    const appState = {
        currentPage: 'login',
        categories: ['Paints', 'Tools', 'Fittings', 'PVC Panel', 'Plumbing', 'Water Proofing', 'Accessories', 'Powders'],
        products: [
            { id: 1, name: 'Enamel Paint', category: 'Paints', quantity: 50, price: 150.00 },
            { id: 2, name: 'Plastic Paint', category: 'Paints', quantity: 30, price: 450.00 },
            { id: 3, name: 'Distemper', category: 'Paints', quantity: 15, price: 600.00 },
            { id: 4, name: 'Hammer', category: 'Tools', quantity: 25, price: 250.00 },
            { id: 5, name: 'Screwdriver Set', category: 'Tools', quantity: 10, price: 400.00 },
            { id: 6, name: 'Swan Neck Tap', category: 'Fittings', quantity: 40, price: 800.00 },
        ],
        staff: [
            { id: 1, fullName: 'Ramesh Kumar', role: 'Manager', status: 'Active' },
            { id: 2, fullName: 'Sita Sharma', role: 'Cashier', status: 'Active' },
            { id: 3, fullName: 'Anil Singh', role: 'Stock Keeper', status: 'On Leave' },
        ],
        bill: {
            items: [],
            total: 0
        },
    };

    const loginPage = document.getElementById('login-page');
    const mainApp = document.getElementById('main-app');
    const loginBtn = document.getElementById('loginBtn');
    const pages = document.querySelectorAll('.page');
    const productModal = document.getElementById('productModal');
    const addProductBtn = document.getElementById('addProductBtn');
    const cancelModalBtn = document.getElementById('cancelModalBtn');
    const productForm = document.getElementById('productForm');

    function showPage(pageId) {
        appState.currentPage = pageId;
        pages.forEach(page => {
            page.classList.toggle('hidden', page.id !== pageId);
        });
        if(pageId === 'home') {
            renderSalesChart();
        }
    }

    function renderCategoryGrid() {
        const grid = document.getElementById('categoryGrid');
        grid.innerHTML = appState.categories.map(cat => `
            <div class="bg-slate-800 p-6 rounded-xl text-center font-bold text-lg hover:bg-teal-500 hover:text-slate-900 cursor-pointer transition-colors">
                ${cat}
            </div>
        `).join('');
    }

    function renderBillingProductGrid() {
        const grid = document.getElementById('billingProductGrid');
        const searchTerm = document.getElementById('billingProductSearch').value.toLowerCase();
        
        const filteredProducts = appState.products.filter(p => p.name.toLowerCase().includes(searchTerm) && p.quantity > 0);

        if (filteredProducts.length === 0) {
            grid.innerHTML = `<p class="text-slate-400 col-span-full text-center py-4">No products found.</p>`;
            return;
        }

        grid.innerHTML = filteredProducts.map(product => `
            <div class="bg-slate-800 rounded-lg p-4 flex flex-col justify-between">
                <div>
                    <div class="bg-teal-500 h-20 w-full rounded-md mb-3"></div>
                    <h3 class="font-bold">${product.name}</h3>
                    <p class="text-sm text-slate-400">In Stock: ${product.quantity}</p>
                </div>
                <button data-product-id="${product.id}" class="add-to-bill-btn w-full bg-slate-700 text-teal-400 p-2 rounded-lg font-bold mt-3 hover:bg-slate-600">
                    Add (₹${product.price.toFixed(2)})
                </button>
            </div>
        `).join('');
    }

    function renderStaffTable() {
        const staffTableBody = document.getElementById('staffTableBody');
        staffTableBody.innerHTML = appState.staff.map(member => `
             <tr class="border-b border-slate-700">
                <td class="p-4">${member.fullName}</td>
                <td class="p-4">${member.role}</td>
                <td class="p-4">
                    <span class="px-3 py-1 text-sm rounded-full ${member.status === 'Active' ? 'bg-green-800 text-green-200' : 'bg-amber-800 text-amber-200'}">${member.status}</span>
                </td>
                <td class="p-4">
                    <button class="text-teal-400 hover:underline">View Details</button>
                </td>
            </tr>
        `).join('');
    }
    
    function renderBillSummary() {
        const billItemsContainer = document.getElementById('billItems');
        const billTotalEl = document.getElementById('billTotal');

        if (appState.bill.items.length === 0) {
            billItemsContainer.innerHTML = `<p class="text-slate-400 text-center py-4">No items added yet.</p>`;
        } else {
            billItemsContainer.innerHTML = appState.bill.items.map(item => `
                <div class="flex justify-between items-center mb-2 text-sm">
                    <div>
                        <p class="font-semibold">${item.name}</p>
                        <p class="text-slate-400">Qty: ${item.quantity} x ₹${item.price.toFixed(2)}</p>
                    </div>
                    <p class="font-bold">₹${(item.quantity * item.price).toFixed(2)}</p>
                </div>
            `).join('');
        }

        appState.bill.total = appState.bill.items.reduce((sum, item) => sum + (item.quantity * item.price), 0);
        billTotalEl.textContent = `₹${appState.bill.total.toFixed(2)}`;
    }

    function addToBill(productId) {
        const product = appState.products.find(p => p.id === productId);
        if (!product || product.quantity <= 0) return;

        const existingItem = appState.bill.items.find(item => item.id === productId);
        if (existingItem) {
            if (existingItem.quantity < product.quantity) {
                existingItem.quantity++;
            }
        } else {
            appState.bill.items.push({ id: product.id, name: product.name, price: product.price, quantity: 1 });
        }
        renderBillSummary();
    }

    let salesChartInstance = null;
    function renderSalesChart() {
        const ctx = document.getElementById('salesChart').getContext('2d');
        if(salesChartInstance) salesChartInstance.destroy();
        
        Chart.defaults.color = '#94a3b8';

        salesChartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Paints', 'Tools', 'Fittings', 'PVC Panel', 'Plumbing'],
                datasets: [{
                    label: 'Sales (₹)',
                    data: [12500, 8300, 9600, 4500, 6200],
                    backgroundColor: 'rgba(20, 184, 166, 0.6)',
                    borderColor: 'rgba(20, 184, 166, 1)',
                    borderWidth: 1,
                    borderRadius: 5,
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.1)' } },
                    x: { grid: { color: 'rgba(255,255,255,0.1)' } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#1e293b', titleFont: { size: 16 }, bodyFont: { size: 14 },
                        padding: 12, cornerRadius: 8,
                    }
                }
            }
        });
    }

    function openModal() {
        productModal.classList.remove('hidden');
        productModal.classList.add('flex');
    }

    function closeModal() {
        productModal.classList.add('hidden');
        productModal.classList.remove('flex');
        productForm.reset();
    }

    loginBtn.addEventListener('click', () => {
        loginPage.style.display = 'none';
        mainApp.style.display = 'block';
        showPage('home');
    });

    document.querySelectorAll('.nav-card').forEach(card => {
        card.addEventListener('click', (e) => {
            e.preventDefault();
            showPage(card.hash.substring(1));
        });
    });
    
    document.querySelectorAll('.home-btn').forEach(btn => {
        btn.addEventListener('click', () => showPage('home'));
    });

    addProductBtn.addEventListener('click', openModal);
    cancelModalBtn.addEventListener('click', closeModal);
    productModal.querySelector('.modal-backdrop').addEventListener('click', closeModal);

    document.getElementById('billingProductSearch').addEventListener('input', renderBillingProductGrid);
    document.getElementById('billingProductGrid').addEventListener('click', (e) => {
        const button = e.target.closest('.add-to-bill-btn');
        if (button) {
            const productId = parseInt(button.dataset.productId);
            addToBill(productId);
        }
    });

    renderCategoryGrid();
    renderStaffTable();
    renderBillingProductGrid();
    renderBillSummary();
});
</script>

</body>
</html>

